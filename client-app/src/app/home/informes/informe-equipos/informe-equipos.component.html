<!-- información del equipo-->
<h2 class="form-informe-title">Información del Equipo</h2>
<!-- errors -->
<div class="clr-row">
  <div class="alert alert-danger" role="alert" *ngIf="error">
    <div class="alert-items">
      <div class="alert-item static">
        <div class="alert-icon-wrapper">
          <clr-icon class="alert-icon" shape="exclamation-circle"></clr-icon>
        </div>
        <span class="alert-text">{{errorMessage}}</span>
      </div>
    </div>
    <button type="button" class="close" aria-label="Close" (click)="error = false">
      <clr-icon aria-hidden="true" shape="close"></clr-icon>
    </button>
  </div>

  <!-- info -->
  <div class="alert alert-info" *ngIf="info">
    <div class="alert-items">
      <div class="alert-item static">
        <div class="alert-icon-wrapper">
          <clr-icon class="alert-icon" shape="exclamation-circle"></clr-icon>
        </div>
        <span class="alert-text">{{errorMessage}}</span>
      </div>
    </div>
    <button type="button" class="close" aria-label="Close" (click)="info = false">
      <clr-icon aria-hidden="true" shape="close"></clr-icon>
    </button>
  </div>
</div>
<br/>
<form clrForm>
  <div class="clr-col-8 content-no-print">
    <div class="clr-row">
      <!--    numero de serie-->
      <div class="clr-col-4">
        <div class="clr-form-control">
          <label class="tamanho-total clr-col-5 label-input">N. Serie:</label>
          <div class="clr-control-container">
            <div class="clr-input-wrapper">
              <input type="text" class="clr-input" id="nroSerie" name="nroSerie" #nroSerie
                     (keyup.enter)="onEnterNroSerie(nroSerie.value)"
                     (keyup)="onKeyNroSerie(nroSerie.value)"
                     [(ngModel)]="numeroSerie"/>
            </div>
          </div>
        </div>
      </div>

      <a class="btn btn-outline content-no-print btn-print"
         (click)="limpiarCamposInfo()">
        Limpiar Campos
      </a>
      <a class="btn btn-outline content-no-print btn-print"
              onclick="window.print()">
        Imprimir
      </a>
    </div>
  </div>

  <!-- información del equipo-->
  <h3 class="form-informe-sub-title">Datos del Equipo</h3>
  <div class="clr-row">
    <div class="clr-col-6">
      <table class="table table-vertical">
        <tbody>
        <tr>
          <th class="column-width">Tipo:</th>
          <td>{{equipoSeleccionado?.tipoEquipo}}</td>
        </tr>
        <tr>
          <th class="column-width">Marca:</th>
          <td>{{equipoSeleccionado?.marca}}</td>
        </tr>
        <tr>
          <th class="column-width">Modelo:</th>
          <td>{{equipoSeleccionado?.modelo}}</td>
        </tr>
        <tr>
          <th class="column-width">Nro. Serie:</th>
          <td>{{equipoSeleccionado?.numeroSerie}}</td>
        </tr>
        <tr>
          <th class="column-width">Estado Contrato:</th>
          <td>{{equipoSeleccionado?.contratoId? equipoSeleccionado.estadoContrato: 'Sin contrato'}}</td>
        </tr>
        </tbody>
      </table>
    </div>
    <div class="clr-col-6">
      <table class="table table-vertical">
        <tbody>
        <tr>
          <th class="column-width">Nro. Patrimonial:</th>
          <td>{{equipoSeleccionado?.numeroPatrimonial}}</td>
        </tr>
        <tr>
          <th class="column-width">Ubicacion:</th>
          <td>{{equipoSeleccionado?.bloque}}{{equipoSeleccionado?.numeroSala}} {{equipoSeleccionado?.nivel}}</td>
        </tr>
        <tr>
          <th class="column-width">Puesta en Marcha:</th>
          <td>{{fechaInstalacion}}</td>
        </tr>
        <tr>
          <th class="column-width">Estado del Equipo:</th>
          <td>{{equipoSeleccionado?.estadoEquipo}}</td>
        </tr>
        </tbody>
      </table>
    </div>
  </div>

  <!-- descripción del equipo-->
  <h3 class="form-informe-sub-title">Descripción del Equipo</h3>
  <div class="clr-row">
    <div class="clr-col-6">
      <table class="table table-vertical">
        <tbody>
        <tr>
          <th class="column-width">Descripción:</th>
          <td>{{equipoSeleccionado?.descripcionEquipo}}</td>
        </tr>
        <tr>
          <th class="column-width">Costo del Equipo:</th>
          <td>{{equipoSeleccionado?.costo}}</td>
        </tr>
        <tr>
          <th class="column-width">Versión del Software:</th>
          <td>{{equipoSeleccionado?.versionSw}}</td>
        </tr>
        </tbody>
      </table>
    </div>
    <div class="clr-col-6">
      <table class="table table-vertical">
        <tbody>
        <tr>
          <th class="column-width">Año Fabricación:</th>
          <td>{{fechaFabricacion}}</td>
        </tr>
        <tr>
          <th class="column-width">Vto. de garantía:</th>
          <td>{{fechaVenGarantia}}</td>
        </tr>
        </tbody>
      </table>
    </div>
  </div>

  <!-- medición de desempeño-->
  <h3 class="form-informe-sub-title">Medición de desempeño</h3>
  <!-- errors -->
  <div class="alert alert-danger" role="alert" *ngIf="errorMetricas">
    <div class="alert-items">
      <div class="alert-item static">
        <div class="alert-icon-wrapper">
          <clr-icon class="alert-icon" shape="exclamation-circle"></clr-icon>
        </div>
        <span class="alert-text">{{errorMetricasMessage}}</span>
      </div>
    </div>
    <button type="button" class="close" aria-label="Close" (click)="errorMetricas = false">
      <clr-icon aria-hidden="true" shape="close"></clr-icon>
    </button>
    <br/>
  </div>

  <!-- info -->
  <div class="alert alert-info" role="alert" *ngIf="infoMetricas">
    <div class="alert-items">
      <div class="alert-item static">
        <div class="alert-icon-wrapper">
          <clr-icon class="alert-icon" shape="info-circle"></clr-icon>
        </div>
        <span class="alert-text">{{infoMetricasMessage}}</span>
      </div>
    </div>
    <button type="button" class="close" aria-label="Close" (click)="infoMetricas = false">
      <clr-icon aria-hidden="true" shape="close"></clr-icon>
    </button>
  </div>

  <div class="clr-row">
    <clr-input-container class="content-no-print">
      <label>Fecha Inicio:</label>
      <input clrInput type="date" [(ngModel)]="fechaIniMetrica" name="fechaIniMetrica"
             min="1990-01-01" max="2050-12-31"/>
    </clr-input-container>

    <clr-input-container class="content-no-print">
      <label>Fecha Fin:</label>
      <input clrInput type="date" [(ngModel)]="fechaFinMetrica" name="fechaFinMetrica"
             min="1990-01-01" max="2050-12-31"/>
    </clr-input-container>

    <div class="clr-col-1 clr-align-self-end content-no-print" *ngIf="equipoSeleccionado">
      <button type="button" class="btn btn-sm btn-success"
      (click)="filtrarMetricas()">
        <clr-icon shape="search"></clr-icon>
      </button>
    </div>
  </div>

  <div class="clr-row">
    <div class="clr-col-6">
      <table class="table table-vertical">
        <tbody>
        <tr class=" column-width content-print">
          <th class="column-width">Fecha: </th>
          <td>{{fechaIniMetrica }} al {{fechaFinMetrica}}</td>
        </tr>
        <tr>
          <th class="column-width">El tiempo de inactividad (h):</th>
          <td>{{metricasDTO?.totalHoursInactive}}</td>
        </tr>
        <tr>
          <th class="column-width">La medida de tiempo entre averias (h):</th>
          <td>{{metricasDTO?.mediaAverias}}</td>
        </tr>
        </tbody>
      </table>
    </div>
    <div class="clr-col-6">
      <table class="table table-vertical">
        <tbody>
        <tr>
          <th class="column-width">La repetición de averias (h):</th>
          <td>{{metricasDTO?.totalAverias}}</td>
        </tr>
        </tbody>
      </table>
    </div>
  </div>

  <!-- registro de servicios-->
  <h3 class="form-informe-sub-title">Registro de Servicios</h3>
  <br/>
  <!-- info -->
  <div class="alert alert-info" role="alert" *ngIf="infoServicios">
    <div class="alert-items">
      <div class="alert-item static">
        <div class="alert-icon-wrapper">
          <clr-icon class="alert-icon" shape="info-circle"></clr-icon>
        </div>
        <span class="alert-text">{{infoServiciosMessage}}</span>
      </div>
    </div>
    <button type="button" class="close" aria-label="Close" (click)="infoServicios = false">
      <clr-icon aria-hidden="true" shape="close"></clr-icon>
    </button>
  </div>

  <!-- errors -->
  <div class="alert alert-danger" role="alert" *ngIf="errorServicios">
    <div class="alert-items">
      <div class="alert-item static">
        <div class="alert-icon-wrapper">
          <clr-icon class="alert-icon" shape="exclamation-circle"></clr-icon>
        </div>
        <span class="alert-text">{{errorServiciosMessage}}</span>
      </div>
    </div>
    <button type="button" class="close" aria-label="Close" (click)="errorServicios = false">
      <clr-icon aria-hidden="true" shape="close"></clr-icon>
    </button>
    <br/>
  </div>

  <div class="clr-row">
    <clr-input-container class="content-no-print">
      <label>Fecha Inicio:</label>
      <input clrInput type="date" name="fehcaIniServicio" [(ngModel)]="fehcaIniServicio"
             min="1990-01-01" max="2050-12-31"/>
    </clr-input-container>

    <clr-input-container class="content-no-print">
      <label>Fecha Fin:</label>
      <input clrInput type="date" name="fechaFinServicio" [(ngModel)]="fechaFinServicio"
             min="1990-01-01" max="2050-12-31"/>
    </clr-input-container>

    <div class="clr-col-1 clr-align-self-end content-no-print" *ngIf="equipoSeleccionado">
      <button type="button" class="btn btn-sm btn-success"
              (click)="filtrarManteniiento()">
        <clr-icon shape="search"></clr-icon>
      </button>
    </div>
  </div>
  <table class="table table-compact">
    <thead>
    <tr>
      <th class="left">Fecha</th>
      <th>Horas de uso del Equipo</th>
      <th>Trabajo Realizado</th>
      <th>Código del Error</th>
      <th class="left">Tipo de Mantenimiento</th>
    </tr>
    </thead>
    <tbody>
    <tr *ngFor="let mantenimiento of mantenimientos">
      <td class="left">{{mantenimiento.fechaMantenimiento}}</td>
      <td>{{mantenimiento.horasDeUso}}</td>
      <td>{{mantenimiento.tareaRealizada}}</td>
      <td>{{mantenimiento.error}}</td>
      <td class="left">{{mantenimiento.tipoServicio}}</td>
    </tr>
    </tbody>
  </table>


  <!-- registro de repuestos-->
  <h3 class="form-informe-sub-title">Registro de Repuestos</h3>
  <br/>
  <!-- info -->
  <div class="alert alert-info" role="alert" *ngIf="infoRepuestos">
    <div class="alert-items">
      <div class="alert-item static">
        <div class="alert-icon-wrapper">
          <clr-icon class="alert-icon" shape="info-circle"></clr-icon>
        </div>
        <span class="alert-text">{{infoRepuestosMessage}}</span>
      </div>
    </div>
    <button type="button" class="close" aria-label="Close" (click)="infoRepuestos = false">
      <clr-icon aria-hidden="true" shape="close"></clr-icon>
    </button>
  </div>


  <!-- errors -->
  <div class="alert alert-danger" role="alert" *ngIf="errorRepuestos">
    <div class="alert-items">
      <div class="alert-item static">
        <div class="alert-icon-wrapper">
          <clr-icon class="alert-icon" shape="exclamation-circle"></clr-icon>
        </div>
        <span class="alert-text">{{errorRepuestosMessage}}</span>
      </div>
    </div>
    <button type="button" class="close" aria-label="Close" (click)="errorRepuestos = false">
      <clr-icon aria-hidden="true" shape="close"></clr-icon>
    </button>
    <br/>
  </div>

  <div class="clr-row">
    <clr-input-container class="content-no-print">
      <label>Fecha Inicio:</label>
      <input clrInput type="date" name="fehcaIniRepuesto" [(ngModel)]="fehcaIniRepuesto"
             min="1990-01-01" max="2050-12-31"/>
    </clr-input-container>

    <clr-input-container class="content-no-print">
      <label>Fecha Fin:</label>
      <input clrInput type="date" name="fechaFinRepuesto" [(ngModel)]="fechaFinRepuesto"
             min="1990-01-01" max="2050-12-31"/>
    </clr-input-container>

    <div class="clr-col-1 clr-align-self-end content-no-print" *ngIf="equipoSeleccionado">
      <button type="button" class="btn btn-sm btn-success"
              (click)="filtrarRepuestos()">
        <clr-icon shape="search"></clr-icon>
      </button>
    </div>
  </div>

  <table class="table table-compact">
    <thead>
    <tr>
      <th class="left">Fecha</th>
      <th>Código</th>
      <th>Descripción</th>
      <th>Cantidad Utilizada</th>
      <th>Precio Unitario</th>
      <th class="left">Estado del Repuesto</th>
    </tr>
    </thead>
    <tbody>
    <tr *ngFor="let detalle of solRepuestosDet">
      <td class="left">{{detalle?.solicitud?.fechaSolicitud}}</td>
      <td>{{detalle?.repuesto?.codigo}}</td>
      <td>{{detalle?.repuesto?.descripcionArticulo}}</td>
      <td>{{detalle?.cantidadUsada}}</td>
      <td>{{detalle?.repuesto?.precio}}</td>
      <td class="left">{{detalle?.solicitud?.estado}}</td>
    </tr>
    </tbody>
  </table>

</form>
